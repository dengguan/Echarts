<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Document</title>
  <link rel="stylesheet" href="../bootstrap.min.css">
  <link rel="stylesheet" type="text/css" href="../../../Downloads/citySelect/css/city-select.css">
  <style>
    body{
      padding-top:80px;
    }
	#place-input{
	}
    #search-btn{
      margin-top: 20px;
	 
    }
  </style>
</head>
<body>
<h2>城市单选</h2>
	<div class="city-select" id="single-select-1">
		<div class="city-info">
			<div class="city-name">
				<span>北京市</span>
				<span>北京市</span>
				<span>北京市</span>
				<span>北京市</span>
			</div>
			<div class="city-input">
				<input type="text" id="input-search" value="" placeholder="请选择城市" />
			</div>
		</div>
		<ul class="city-list hide">
			<li class="caller active"><span class="name">北京市</span><span class="spell">beijingshi</span></li>
			<li class="caller"><span class="name">北京市</span><span class="spell">beijingshi</span></li>
			<li class="caller"><span class="name">北京市</span><span class="spell">beijingshi</span></li>
			<li class="caller"><span class="name">北京市</span><span class="spell">beijingshi</span></li>
			<li class="caller"><span class="name">北京市</span><span class="spell">beijingshi</span></li>
			<li class="caller"><span class="name">北京市</span><span class="spell">beijingshi</span></li>
			<li class="caller"><span class="name">北京市</span><span class="spell">beijingshi</span></li>
			<li class="caller"><span class="name">北京市</span><span class="spell">beijingshi</span></li>
		</ul>
		<div class="city-pavilion hide">
			<div class="city-tabs">
				<a href="javascript:;" class="active">热门城市</a>
				<a href="javascript:;">AB</a>
				<a href="javascript:;">CD</a>
				<a href="javascript:;">EFG</a>
				<a href="javascript:;">H</a>
				<a href="javascript:;">J</a>
				<a href="javascript:;">KL</a>
				<a href="javascript:;" class="forbid">MNP</a>
				<a href="javascript:;">QR</a>
				<a href="javascript:;">S</a>
				<a href="javascript:;">T</a>
				<a href="javascript:;">W</a>
				<a href="javascript:;">X</a>
				<a href="javascript:;">Y</a>
				<a href="javascript:;">Z</a>
			</div>
			<div class="city-cont">
				<dl class="city-HOT">
					<dd>
						<a href="javascript:;">北京市</a>
						<a href="javascript:;">北京市</a>
						<a href="javascript:;">北京市</a>
						<a href="javascript:;">北京市</a>
						<a href="javascript:;">北京市</a>
						<a href="javascript:;">北京市</a>
						<a href="javascript:;">北京市</a>
						<a href="javascript:;">北京市</a>
						<a href="javascript:;">北京市</a>
						<a href="javascript:;">北京市</a>
						<a href="javascript:;">北京市</a>
						<a href="javascript:;">北京市</a>
						<a href="javascript:;">北京市</a>
						<a href="javascript:;">北京市</a>
						<a href="javascript:;">北京市</a>
						<a href="javascript:;">北京市</a>
						<a href="javascript:;">北京市</a>
						<a href="javascript:;">北京市</a>
					</dd>
				</dl>
				<p>*可以直接搜索查找城市（支持名称、拼音模糊搜索）<a href="javascript:;">清空</a><span>5</span></p>
				<div class="city-tips">最多只能选择<span>5</span>项</div>
			</div>
		</div>
	</div><!-- end .city-select -->

<div class="container">
  <div class="row">
    <div class="col-md-3 col-md-offset-3">
      <form class="form-horizontal">
        <input id="place-input" type="text" class="form-control" value="趵突泉" placeholder="请输入地址">
        <button type="button" id="search-btn" class="btn btn-success">
          查询
        </button>
      </form>

    </div>
    <div class="col-md-6">
      <div id="main" style="height:500px;"></div>
    </div>
  </div>
</div>  
<script src='../jquery.min.js'></script>
<script src='../echarts.min.js'></script>
<script src='../china.js'></script>
<script src="http://www.jq22.com/jquery/jquery-1.10.2.js"></script>
	<script type="text/javascript" src="../../../Downloads/citySelect/js/citydata.min.js"></script>
	<script type="text/javascript" src="../../../Downloads/citySelect/js/citySelect-1.0.0.min.js"></script>
	<script type="text/javascript">
	$(function() {

		// 单选
		var singleSelect1 = $('#single-select-1').citySelect({
			dataJson: cityData,
			multiSelect: false,
			shorthand: true,
			search: true,
			onInit: function () {
				console.log(this)
			},
			onTabsAfter: function (target) {
				console.log(target)
			},
			onCallerAfter: function (target, values) {
				console.log(JSON.stringify(values))
			}
		});
		// 百度地图的开发者秘钥



		// 单选设置城市
		singleSelect1.setCityVal('北京市');
		//console.log(singleSelect1.getCityVal())

		// 单选
		var singleSelect2 = $('#single-select-2').citySelect({
			dataJson: cityData
		});

		// 单选设置城市
		singleSelect2.setCityVal('北京市');

		// 禁止点击显示的接口
		singleSelect2.status('readonly');

		//单选
		var singleSelect3 = $('#single-select-3').citySelect({
			dataJson: cityData
		});

		// 单选设置城市
		singleSelect3.setCityVal('广州市');

		// 禁止点击显示的接口
		singleSelect3.status('disabled');
		
		
		var token = 'fHrNQj6DHTjZtfTvfqbsuvTzKc5V9SBl'
var url = 'http://api.map.baidu.com/geocoder/v2/?output=json&ak=' + token + '&address='
var ePlaceInput = $('.city-input ')
var eSearchBtn = $('#search-btn')
var myChart = echarts.init(document.getElementById('main'))
var chartData = []
eSearchBtn.click(function() {
  var place =singleSelect1.dataJson	
  alert(place)
  if (place) {
    $.getJSON(url + place + '&callback=?', function(res) {
      var loc
      if (res.status === 0) {
        loc = res.result.location
        chartData.push({
          name: name,
          value: [loc.lng, loc.lat]
        })
        drawMap(place)
      }else{
        alert('百度没有找到地址信息')
      }
    })
  }
})

function drawMap(name) {

  var option = {
    backgroundColor: '#404a59',
    title: {
      text: '2016要去的地方',
      left: 'center',
      textStyle: {
        color: '#fff'
      }
    },
    tooltip: {
      trigger: 'item'
    },
    toolbox: {
        show: true,
        feature: {
            saveAsImage: {
                show: true
            }
        }
    },
    geo: {
      map: 'china',
      label: {
        emphasis: {
          show: false
        }
      },
      roam: true,
      itemStyle: {
        normal: {
          areaColor: '#323c48',
          borderColor: '#111'
        },
        emphasis: {
          areaColor: '#2a333d'
        }
      }
    },
    series: [{
      name: '地址',
      type: 'scatter',
      coordinateSystem: 'geo',
      data: chartData,
      symbolSize: function(val) {
        return 10;
      },
    }]
  }
  myChart.setOption(option)
}

		
	});
	</script>
<script>  
/*// 百度地图的开发者秘钥
var token = 'fHrNQj6DHTjZtfTvfqbsuvTzKc5V9SBl'
var url = 'http://api.map.baidu.com/geocoder/v2/?output=json&ak=' + token + '&address='
var ePlaceInput = $('.city-select .city-info span ')
var eSearchBtn = $('#search-btn')
var myChart = echarts.init(document.getElementById('main'))
var chartData = []
eSearchBtn.click(function() {
  var place = singleSelect1.getCityVal()
  if (place) {
    $.getJSON(url + place + '&callback=?', function(res) {
      var loc
      if (res.status === 0) {
        loc = res.result.location
        chartData.push({
          name: name,
          value: [loc.lng, loc.lat]
        })
        drawMap(place)
      }else{
        alert('百度没有找到地址信息')
      }
    })
  }
})

function drawMap(name) {

  var option = {
    backgroundColor: '#404a59',
    title: {
      text: '2016要去的地方',
      left: 'center',
      textStyle: {
        color: '#fff'
      }
    },
    tooltip: {
      trigger: 'item'
    },
    toolbox: {
        show: true,
        feature: {
            saveAsImage: {
                show: true
            }
        }
    },
    geo: {
      map: 'china',
      label: {
        emphasis: {
          show: false
        }
      },
      roam: true,
      itemStyle: {
        normal: {
          areaColor: '#323c48',
          borderColor: '#111'
        },
        emphasis: {
          areaColor: '#2a333d'
        }
      }
    },
    series: [{
      name: '地址',
      type: 'scatter',
      coordinateSystem: 'geo',
      data: chartData,
      symbolSize: function(val) {
        return 10;
      },
    }]
  }
  myChart.setOption(option)
}
*/
</script>
</body>
</html>